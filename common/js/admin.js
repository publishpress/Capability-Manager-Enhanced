jQuery(document).ready(function($){$('a.neg-cap').attr('title',cmeAdmin.negationCaption);$('a.neg-type-caps').attr('title',cmeAdmin.typeCapsNegationCaption);$('td.cap-unreg').attr('title',cmeAdmin.typeCapUnregistered);$('a.normal-cap').attr('title',cmeAdmin.switchableCaption);$('span.cap-x').attr('title',cmeAdmin.capNegated);$('table.cme-checklist input[class!="cme-check-all"]').not(':disabled').attr('title',cmeAdmin.chkCaption);$('table.cme-checklist a.neg-cap').click(function(e){$(this).closest('td').removeClass('cap-yes').removeClass('cap-no').addClass('cap-neg');var cap_name_attr=$(this).parent().find('input[type="checkbox"]').attr('name');$(this).after('<input type="hidden" class="cme-negation-input" name="'+cap_name_attr+'" value="" />');$('input[name="'+cap_name_attr+'"]').closest('td').removeClass('cap-yes').removeClass('cap-no').addClass('cap-neg');return false;});$(document).on('click','table.cme-typecaps span.cap-x,table.cme-checklist span.cap-x,table.cme-checklist td.cap-neg span',function(e){$(this).closest('td').removeClass('cap-neg').removeClass('cap-yes').addClass('cap-no');$(this).parent().find('input[type="checkbox"]').prop('checked',false);$(this).parent().find('input.cme-negation-input').remove();var cap_name_attr=$(this).next('input[type="checkbox"]').attr('name');if(!cap_name_attr){cap_name_attr=$(this).next('label').find('input[type="checkbox"]').attr('name');}
$('input[name="'+cap_name_attr+'"]').parent().closest('td').removeClass('cap-neg').removeClass('cap-yes').addClass('cap-no');$('input[name="'+cap_name_attr+'"]').prop('checked',false).parent().find('input.cme-negation-input').remove();return false;});$("#publishpress_caps_form").bind("keypress",function(e){if(e.keyCode==13){$(document.activeElement).parent().find('input[type="submit"]').first().click();return false;}});$('input.cme-check-all').click(function(e){$(this).closest('table').find('input[type="checkbox"][disabled!="disabled"]:visible').prop('checked',$(this).is(":checked"));});$('a.cme-neg-all').click(function(e){$(this).closest('table').find('a.neg-cap:visible').click();return false;});$('a.cme-switch-all').click(function(e){$(this).closest('table').find('td.cap-neg span').click();return false;});$('table.cme-typecaps a.neg-type-caps').click(function(e){$(this).closest('tr').find('td[class!="cap-neg"]').filter('td[class!="cap-unreg"]').each(function(){$(this).addClass('cap-neg');var cap_name_attr=$(this).find('input[type="checkbox"]').attr('name');$(this).append('<input type="hidden" class="cme-negation-input" name="'+cap_name_attr+'" value="" />');$('input[name="'+cap_name_attr+'"]').parent().next('a.neg-cap:visible').click();});return false;});$('table.cme-typecaps th').click(function(){var columnNo=$(this).index();var check_val=!$(this).prop('checked_all');if($(this).hasClass('term-cap'))
var class_sel='[class*="term-cap"]';else
var class_sel='[class*="post-cap"]';var chks=$(this).closest("table").find("tr td"+class_sel+":nth-child("+(columnNo+1)+') input[type="checkbox"]:visible');$(chks).each(function(i,e){$('input[name="'+$(this).attr('name')+'"]').prop('checked',check_val);});$(this).prop('checked_all',check_val);});$('a.cme-fix-read-cap').click(function(){$('input[name="caps[read]"]').prop('checked',true);$('input[name="SaveRole"]').trigger('click');return false;});$(document).on("keydown",".ppc-add-custom-row-body input[type='text']",function(e){return 13!==e.keyCode}),$(document).on("click",".ppc-feature-gutenberg-new-submit, .ppc-feature-classic-new-submit",function(e){e.preventDefault();var t,a,r,s=$(this);$(".ppc-feature-submit-form-error").remove(),s.attr("disabled",!0),$(".ppc-feature-post-loader").addClass("is-active"),s.hasClass("ppc-feature-gutenberg-new-submit")?(t="ppc_submit_feature_gutenberg_by_ajax",a=$(".ppc-feature-gutenberg-new-name").val(),r=$(".ppc-feature-gutenberg-new-ids").val()):(t="ppc_submit_feature_classic_by_ajax",a=$(".ppc-feature-classic-new-name").val(),r=$(".ppc-feature-classic-new-ids").val());var c={action:t,security:$(".ppc-feature-submit-form-nonce").val(),custom_label:a,custom_element:r};$.post(ajaxurl,c,function(e){"error"==e.status?(s.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:red;">'+e.message+"</div>"),$(".ppc-feature-submit-form-error").delay(2e3).fadeOut("slow")):"promo"==e.status?s.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:red;">'+e.message+"</div>"):(s.hasClass("ppc-feature-gutenberg-new-submit")?($(".ppc-feature-gutenberg-new-name").val(""),$(".ppc-feature-gutenberg-new-ids").val("")):($(".ppc-feature-classic-new-name").val(""),$(".ppc-feature-classic-new-ids").val("")),s.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:green;">'+e.message+"</div>"),$(".ppc-feature-submit-form-error").delay(5e3).fadeOut("slow"),setTimeout(function(){$(".ppc-menu-overlay-item").removeClass("ppc-menu-overlay-item")},5e3),s.closest("table").find(".ppc-add-custom-row-header").before(e.content)),$(".ppc-feature-post-loader").removeClass("is-active"),s.attr("disabled",!1)})}),$(document).on("click",".ppc-custom-features-delete",function(e){if(confirm(cmeAdmin.deleteWarning)){var t=$(this),a=t.attr("data-id"),r=t.attr("data-parent"),s=$(".ppc-feature-submit-form-nonce").val();t.closest(".ppc-menu-row").fadeOut(300);var c={action:"ppc_delete_custom_post_features_by_ajax",security:s,delete_id:a,delete_parent:r};$.post(ajaxurl,c,function(e){"error"==e.status&&(t.closest(".ppc-menu-row").show(),alert(e.message))})}});});